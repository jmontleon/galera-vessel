# This should be your Ansible playbooks to provision your containers.
# An inventory will be automatically created using the names of the services
# from your container.yml file.
# Add any roles or other modules you'll need to this directory too.
# For many examples of roles, check out Ansible Galaxy: https://galaxy.ansible.com/
#
#---
{% set count = containers|int %}
{% for i in range (1,count+1) %}
- hosts: mariadb-{{ i }}
  vars:
    mariadb_root_password: {{ mariadb_root_password }}
    wsrep_cluster_addresses: {% for j in range (1,count+1) %}mariadb-{{ j }}{% if not loop.last %},{% endif %}{% endfor %}

    wsrep_node_name: mariadb-{{ i }}
  gather_facts: false
  roles:
   - jmontleon.galera-container
{% endfor %}
